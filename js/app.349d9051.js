(function(t){function e(e){for(var n,r,s=e[0],c=e[1],l=e[2],u=0,d=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);f&&f(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var s=a[r];0!==i[s]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},r={app:0},i={app:0},o=[];function s(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"12a40e3e"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={about:1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise((function(e,a){for(var n="css/"+({about:"about"}[t]||t)+"."+{about:"fbe1b00e"}[t]+".css",i=c.p+n,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var l=o[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===i))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===n||u===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var n=e&&e.target&&e.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete r[t],f.parentNode.removeChild(f),a(o)},f.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){r[t]=0})));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(f);var a=i[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",d.name="ChunkLoadError",d.type=n,d.request=r,a[1](d)}i[t]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/historias-del-magdalena/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var f=u;o.push([1,"chunk-vendors"]),a()})({0:function(t,e){},"034f":function(t,e,a){"use strict";a("85ec")},1:function(t,e,a){t.exports=a("56d7")},"1be2":function(t,e,a){"use strict";a("faf5")},2:function(t,e){},3:function(t,e){},"31f2":function(t,e,a){"use strict";a("ebce")},4:function(t,e){},"41f3":function(t,e,a){"use strict";a("f884")},5:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"db",(function(){return Ie})),a.d(e,"Storage",(function(){return Se}));a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("4de4");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-main",[a("router-view")],1)],1)},i=[],o={name:"App",data:function(){return{}}},s=o,c=(a("034f"),a("2877")),l=a("6544"),u=a.n(l),d=a("7496"),f=a("f6c4"),m=Object(c["a"])(s,r,i,!1,null,null,null),h=m.exports;u()(m,{VApp:d["a"],VMain:f["a"]});a("d3b7"),a("3ca3"),a("ddb0");var v=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("hello-world")},g=[],b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{click:function(e){t.overlay=!1}}},[a("header",[t.overlay?t._e():a("v-app-bar",{attrs:{src:"https://i.imgur.com/OCJhmiR.png"}},[a("v-toolbar",{attrs:{src:"https://i.imgur.com/OCJhmiR.png",flat:"",shaped:""}},[a("v-btn",{attrs:{text:""},on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}},[a("v-icon",{attrs:{text:""}},[t._v("mdi-reorder-horizontal")]),t._v(" Menu ")],1),a("v-spacer"),a("v-toolbar-title",{staticClass:"text-h3 font-weight-thin mb-4"},[t._v("HISTORIAS DEL MAGDALENA")]),a("v-spacer"),a("div",{attrs:{align:"right"}},[a("v-btn",{attrs:{to:"/login",disabled:t.usuario,text:""}},[a("v-icon",{attrs:{text:""}},[t._v("mdi-account-cowboy-hat")]),t._v(" Ingresar ")],1)],1)],1)],1)],1),a("v-responsive",[a("Body")],1),a("aside",[a("v-navigation-drawer",{attrs:{dark:"",src:"https://64.media.tumblr.com/bd9a99c95d04cb7a1ae168f04b44a18c/2546c22727df9538-9f/s1280x1920/717cf285883422857098b3aed1dc261b8a2bd6ea.jpg",bottom:"",temporary:"",fixed:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},t._l(t.items,(function(e,n){return a("v-list-item",{key:n,attrs:{to:e.hyper,link:""},on:{click:function(a){return t.ExitBtn(e.text,e.icon)}}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.text))])],1)],1)})),1)],1)],1),a("v-overlay",{attrs:{"z-index":t.zIndex,value:t.overlay,opacity:t.opacity}},[a("v-img",{attrs:{src:"https://i.imgur.com/xJmgFlP.jpg","max-width":"600","max-height":"750"}})],1)],1)},x=[],w=a("4f60"),_=(a("256a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-container",{attrs:{fluid:""}},[a("v-row",{attrs:{dense:""}},t._l(t.Stories,(function(e){return a("v-col",{key:e.title,attrs:{cols:"12",sm:"4"}},[a("v-card",{attrs:{color:"rgba(0, 0, 0, 0.5)"}},[a("v-img",{staticClass:"white--text align-end",attrs:{src:e.imagen,"aspect-ratio":"1.7",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"300px"}}),a("v-card-title",[t._v(" "+t._s(e.title)+" ")]),a("v-card-subtitle",[t._v(" "+t._s(t._f("truncate")(e.sinops,200))+" ")]),a("v-card-actions",[a("v-btn",t._g(t._b({attrs:{rounded:"",plain:"",large:"",color:"light-green"},on:{click:function(a){return t.toPDF(e.historia,e.title,e.imagen)}}},"v-btn",r,!1),n),[t._v(" Leer ")]),a("v-spacer"),a("v-rating",{attrs:{color:"yellow darken-3","background-color":"grey darken-1","empty-icon":"$ratingFull","half-increments":"",hover:"",dense:"",size:"20"},on:{input:function(a){return t.handleRatingChange(a,e.id)}},model:{value:e.valoracion,callback:function(a){t.$set(e,"valoracion",a)},expression:"story.valoracion"}})],1)],1)],1)})),1)],1)]}}])},[a("v-card",{staticClass:"overflow-hidden"},[a("v-app-bar",{attrs:{absolute:"",color:"dark",src:t.Image,"elevate-on-scroll":"","scroll-target":"#scrolling-techniques-7"}},[a("v-btn",{attrs:{color:"rgba(0,0,0,.5)"},on:{click:function(e){return t.prevPage()}}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-arrow-left-thick ")]),t._v("Atrás")],1),a("v-toolbar-title",{staticClass:"flex text-center"},[a("h4",[t._v(t._s(t.Titulo))])]),a("v-btn",{attrs:{color:"rgba(0,0,0,.5)",right:"",absolute:""},on:{click:function(e){return t.nextPage()}}},[t._v(" Siguiente "),a("v-icon",{attrs:{right:""}},[t._v(" mdi-arrow-right-thick ")])],1)],1),a("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-7","max-height":"600"}},[a("v-container",{staticStyle:{height:"1500px"}},[a("div",[a("pdf",{attrs:{src:t.src,page:t.currentPage},on:{"page-loaded":function(e){t.currentPage=e}}})],1)])],1)],1)],1)],1)],1)}),k=[],C=a("1da1"),V=(a("159b"),a("96cf"),a("858e")),y={components:{pdf:V["a"]},data:function(){return{show:!1,src:null,Titulo:"",Image:"",numPages:void 0,currentPage:1,story:!1,Stories:[],puntos:0,nVotos:0}},methods:{handleRatingChange:function(t,e){var a=this;return Object(C["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=w["a"].auth().currentUser,!r){n.next=10;break}return i=Ie.collection("Historias"),n.next=5,i.doc(e).collection("Estrellas").doc(r.uid).set({valoracion:t});case 5:return n.next=7,a.Valoracion(e);case 7:a.HistoriasList(),n.next=11;break;case 10:Ce.push("Login");case 11:case"end":return n.stop()}}),n)})))()},Valoracion:function(t){var e=this;return Object(C["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.nVotos=0,e.puntos=0,a.next=4,Ie.collection("Historias").doc(t).collection("Estrellas").get().then((function(a){a.forEach((function(t){e.puntos=e.puntos+t.data().valoracion,e.nVotos++})),Ie.collection("Historias").doc(t).update({valoracion:e.puntos/e.nVotos})}));case 4:case"end":return a.stop()}}),a)})))()},HistoriasList:function(){var t=this;Ie.collection("Historias").onSnapshot((function(e){t.Stories.length=0,e.forEach((function(e){t.Stories.push({title:e.data().titulo,id:e.data().libroID,sinops:e.data().sinopsis,imagen:e.data().imagen,historia:e.data().historia,valoracion:e.data().valoracion})}))}))},toPDF:function(t,e,a){var n=this,r=w["a"].storage();this.Titulo=e,this.Image=a;var i=r.refFromURL(t);this.currentPage=1,this.src=null,this.src=V["a"].createLoadingTask(t),this.src.promise.then((function(t){n.numPages=t.numPages})),console.log(i)},prevPage:function(){this.currentPage--},nextPage:function(){this.currentPage++}},mounted:function(){this.HistoriasList()}},P=y,I=a("40dc"),S=a("8336"),E=a("b0af"),T=a("99d9"),R=a("62ad"),L=a("a523"),D=a("169a"),j=a("132d"),A=a("adda"),O=a("1d4d"),H=a("0fd9"),U=a("8dd9"),F=a("2fa4"),B=a("2a7f"),$=Object(c["a"])(P,_,k,!1,null,null,null),q=$.exports;u()($,{VAppBar:I["a"],VBtn:S["a"],VCard:E["a"],VCardActions:T["a"],VCardSubtitle:T["b"],VCardTitle:T["d"],VCol:R["a"],VContainer:L["a"],VDialog:D["a"],VIcon:j["a"],VImg:A["a"],VRating:O["a"],VRow:H["a"],VSheet:U["a"],VSpacer:F["a"],VToolbarTitle:B["a"]});var M={components:{Body:q},name:"HelloWorld",data:function(){return{show:!1,drawer:!1,usuario:!1,group:null,absolute:!0,opacity:.85,overlay:!0,zIndex:0,items:[{icon:"mdi-incognito",text:"Anonimo"},{icon:"mdi-book",text:"Títulos de Terror Cósmico",hyper:"/about"},{icon:"mdi-web",text:"Subir Historia",hyper:"/upload"},{icon:"mdi-magnify",text:"Buscar Historias",hyper:"/search"},{icon:"mdi-exit-run",text:"Salir"}]}},methods:{Exit:function(){w["a"].auth().signOut().then((function(){})).catch((function(t){console.log(t)}))},ExitBtn:function(t,e){"Salir"===t&&this.Exit(),"mdi-incognito"!==e&&"mdi-account-check"!==e||Ce.push("ProfileUser")}},watch:{group:function(){this.drawer=!1}},mounted:function(){var t=this;w["a"].auth().onAuthStateChanged((function(e){e?(t.items[0].text=e.displayName,t.usuario=!0,t.items[0].icon="mdi-account-check",Ie.collection("users").doc(e.uid).set({name:e.displayName,email:e.email})):(t.usuario=!1,t.items[0].text="Anonimo",t.items[0].icon="mdi-incognito")}))}},N=M,z=(a("31f2"),a("8860")),W=a("da13"),G=a("5d23"),J=a("34c3"),K=a("f774"),Q=a("a797"),Y=a("6b53"),X=a("71d9"),Z=Object(c["a"])(N,b,x,!1,null,null,null),tt=Z.exports;u()(Z,{VAppBar:I["a"],VBtn:S["a"],VIcon:j["a"],VImg:A["a"],VList:z["a"],VListItem:W["a"],VListItemContent:G["a"],VListItemIcon:J["a"],VListItemTitle:G["c"],VNavigationDrawer:K["a"],VOverlay:Q["a"],VResponsive:Y["a"],VSpacer:F["a"],VToolbar:X["a"],VToolbarTitle:B["a"]});var et={name:"Home",components:{HelloWorld:tt}},at=et,nt=Object(c["a"])(at,p,g,!1,null,null,null),rt=nt.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("loginUser")},ot=[],st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",[a("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",large:"",plain:"",fixed:"",to:"/home"}},[a("v-icon",{attrs:{dark:""}},[t._v(" mdi-arrow-left-bold-outline ")])],1)],1),a("section",[a("v-row",{staticClass:"action",attrs:{align:"center",justify:"center",absolute:"",fixed:""}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-card",{attrs:{color:"rgb(40, 0, 0, 0.2)"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-col",[a("v-text-field",{attrs:{rules:t.emailRules,label:"Email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":t.show1?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min],type:t.show1?"text":"password",name:"input-10-1",label:"Contraseña",hint:"Minimo 8 caracteres",counter:"",required:""},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-btn",{attrs:{text:"",block:"",dark:""},on:{click:function(e){t.sheet=!t.sheet}}},[t._v(" Soy subnormal. He olvidado la contraseña ")]),a("v-checkbox",{attrs:{rules:[function(t){return!!t||"Acepta esto para continuar"}],label:"Aceptar que mi privacidad no es importante",required:""},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"rgb(0, 60, 0, 0.6)"},on:{click:function(e){return t.submitUser()}}},[t._v(" Ingresar datos ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"rgb(100, 0, 0, 0.6)"},on:{click:t.reset}},[t._v(" Eliminar datos ")]),a("v-btn",{attrs:{fixed:"",text:"",icon:"",color:"red lighten-2"},on:{click:t.submitGmail}},[a("v-icon",[t._v("mdi-gmail")])],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{block:"",fab:"",tile:"",color:"rgb(40, 0, 0, 0.2)"}},"v-btn",r,!1),n),[t._v(" REGISTRARSE ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("mdi-close-box")])],1)],1),a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Creación de Usuario")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{label:"Nombre de Usuario",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Email*",rules:t.emailRules,required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{"append-icon":t.show2?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min],label:"Contraseña*",type:t.show2?"text":"password",hint:"Minimo 8 caracteres",required:""},on:{"click:append":function(e){t.show2=!t.show2}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1),a("small",[t._v("* representa casillas obligatorias ")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.ClearUserCr()}}},[t._v(" Eliminar datos ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.submit()}}},[t._v(" Registrar ")])],1)],1)],1),a("v-bottom-sheet",{model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[a("v-sheet",{staticClass:"text-center",attrs:{height:"200px"}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-card",{staticClass:"pa-2",attrs:{tile:"",flat:""}},[a("h1",{staticClass:"text-h4 font-weight-thin mb-4"},[t._v(" Cambiar Contraseña ")]),a("v-text-field",{attrs:{label:"Email",hint:"Recibirá las instrucciones en su bandeja"},model:{value:t.Changepassword,callback:function(e){t.Changepassword=e},expression:"Changepassword"}}),a("v-btn",{staticClass:"mt-6",attrs:{text:"",color:"blue"},on:{click:function(e){return t.ChangePass()}}},[t._v(" Ingresar ")]),a("v-btn",{staticClass:"mt-6",attrs:{text:"",color:"grey"},on:{click:function(e){t.sheet=!t.sheet}}},[t._v(" Cerrar ")])],1)],1)],1)],1)],1)],1)],1)])},ct=[],lt=(a("b0c0"),a("1862"),a("260b"),a("a680"),{data:function(){return{show1:!1,show2:!1,dialog:!1,sheet:!1,Changepassword:"",rules:{required:function(t){return!!t||"Esto es requerido"},min:function(t){return t.length>=8||"Minimo 8 caracteres"}},valid:!0,name:"",password:"",email:"",emailRules:[function(t){return!!t||"Se requiere Email"},function(t){return/.+@.+\..+/.test(t)||"El Email no es valido"}],select:null,checkbox:!1,form:{name:"",email:"",password:""},error:null}},methods:{submit:function(){var t=this;w["a"].auth().createUserWithEmailAndPassword(this.form.email,this.form.password).then((function(e){e.user.updateProfile({displayName:t.form.name}).then((function(){w["a"].auth().currentUser.sendEmailVerification().then((function(){Ce.push("Home")})),w["a"].auth().signOut().then((function(){}))}))})).catch((function(e){t.error=e.message}))},submitUser:function(){w["a"].auth().signInWithEmailAndPassword(this.email,this.password).then((function(){Ce.push("Home")})).catch((function(t){console.log(t)}))},submitGmail:function(){var t=new w["a"].auth.GoogleAuthProvider;w["a"].auth().signInWithPopup(t).then((function(){Ce.push("Home")})).catch((function(t){console.log(t)}))},ChangePass:function(){var t=this;w["a"].auth().sendPasswordResetEmail(this.Changepassword).then((function(){t.Changepassword=""})).catch((function(t){var e=t.code,a=t.message;console.log(e),console.log(a)}))},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},ClearUserCr:function(){this.form.password="",this.form.name="",this.form.email=""}},mounted:function(){},created:function(){}}),ut=lt,dt=a("288c"),ft=a("ac7c"),mt=a("4bd4"),ht=a("8654"),vt=Object(c["a"])(ut,st,ct,!1,null,null,null),pt=vt.exports;u()(vt,{VBottomSheet:dt["a"],VBtn:S["a"],VCard:E["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VCheckbox:ft["a"],VCol:R["a"],VContainer:L["a"],VDialog:D["a"],VForm:mt["a"],VIcon:j["a"],VRow:H["a"],VSheet:U["a"],VSpacer:F["a"],VTextField:ht["a"]});var gt={name:"Login",components:{LoginUser:pt}},bt=gt,xt=Object(c["a"])(bt,it,ot,!1,null,null,null),wt=xt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("profile")},kt=[],Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",large:"",plain:"",fixed:"",to:"/home"}},[a("v-icon",{attrs:{dark:""}},[t._v(" mdi-arrow-left-bold-outline ")])],1)],1),a("v-menu",{staticStyle:{"max-width":"600px"},attrs:{absolute:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"1000",tile:""}},[a("v-card",t._g(t._b({attrs:{tile:""}},"v-card",r,!1),n),[a("v-img",{attrs:{height:"200",src:t.ImagePortada}})],1),a("v-row",{staticStyle:{margin:"2.5%",position:"absolute",top:"130px"}},[a("v-list-item",[a("v-list-item-avatar",{attrs:{size:"100"}},[a("v-img",{attrs:{src:t.ImagePerfil,alt:"No image"}},[a("v-btn",{staticClass:"align-self-center some-extra-styles",attrs:{text:"",block:"","x-large":""},on:{click:function(e){t.profilesheet=!t.profilesheet}}})],1)],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"title",staticStyle:{"margin-top":"20px"}},[t._v(t._s(t.nameUser))]),a("v-list-item-subtitle",[t._v("Escritor/a")])],1)],1)],1)],1)]}}]),model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[a("v-list",[a("v-btn",{attrs:{text:"",block:"",plain:"",tile:"",depressed:""},on:{click:function(e){t.sheet=!t.sheet}}},[t._v(t._s(t.ChangeImageWallpaper))])],1)],1),a("v-responsive",[a("div",{staticClass:"pa-8"}),a("HistoriasSubidas")],1),t.admin?a("v-dialog",{attrs:{width:"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-item-group",[a("v-container",[a("div",{staticStyle:{flex:"1",padding:"70px"}},[a("v-row",{attrs:{justify:"center"}},t._l(3,(function(e){return a("v-col",{key:e,attrs:{cols:"12",md:"4"}},[a("v-item",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.active,o=e.toggle;return[a("v-card",{staticClass:"d-flex align-center",attrs:{color:i?"transparent":"rgb(127, 0, 255, 0.6)",outlined:"",height:"200"},on:{click:o}},[a("v-scroll-y-transition",[i?a("div",t._g(t._b({staticClass:"text-h2 flex-grow-1 text-center",on:{click:t.obtainAc}},"div",r,!1),n),[t._v(" Usuarios ")]):t._e()])],1)]}}],null,!0)})],1)})),1)],1)])],1)]}}],null,!1,874947036),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Lista de Usuarios")])]),a("v-list",[t._l(t.people,(function(e){return a("v-list-item",{key:e.nombre},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.nombre)}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(e.correo)}})],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-account-cancel")])],1)],1)],1)}))],2),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cerrar ")])],1)],1)],1):t._e(),a("v-bottom-sheet",{model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[a("v-sheet",{staticClass:"text-center",attrs:{height:"200px"}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-card",{staticClass:"pa-2",attrs:{tile:"",flat:""}},[a("h1",{staticClass:"text-h4 font-weight-thin mb-4"},[t._v("Cambiar Portada")]),a("v-file-input",{attrs:{label:"Imagen de portada",placeholder:"Selecciona una imagen",accept:"image/*","prepend-icon":"mdi-camera"},model:{value:t.fileImage,callback:function(e){t.fileImage=e},expression:"fileImage"}}),a("v-btn",{staticClass:"mt-6",attrs:{text:"",color:"blue"},on:{click:function(e){return t.changeWallpaper()}}},[t._v(" Cambiar ")]),a("v-btn",{staticClass:"mt-6",attrs:{text:"",color:"grey"},on:{click:function(e){t.sheet=!t.sheet}}},[t._v(" Cancelar ")])],1)],1)],1)],1)],1),a("v-bottom-sheet",{model:{value:t.profilesheet,callback:function(e){t.profilesheet=e},expression:"profilesheet"}},[a("v-sheet",{staticClass:"text-center",attrs:{height:"200px"}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-card",{staticClass:"pa-2",attrs:{tile:"",flat:""}},[a("h1",{staticClass:"text-h4 font-weight-thin mb-4"},[t._v("Cambiar Perfil")]),a("v-file-input",{attrs:{label:"Imagen de perfil",placeholder:"Selecciona una imagen",accept:"image/*","prepend-icon":"mdi-camera"},model:{value:t.fileImage,callback:function(e){t.fileImage=e},expression:"fileImage"}}),a("v-btn",{staticClass:"mt-6",attrs:{text:"",color:"blue"},on:{click:function(e){return t.changeProfile()}}},[t._v(" Cambiar ")]),a("v-btn",{staticClass:"mt-6",attrs:{text:"",color:"grey"},on:{click:function(e){t.profilesheet=!t.profilesheet}}},[t._v(" Cancelar ")])],1)],1)],1)],1)],1)],1)},Vt=[],yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("div",[a("v-banner",{attrs:{color:"rgba(176, 127, 0, 0.8)",dark:"",elevation:"24",shaped:"",width:"800"}},[t._v("Mis Historias")])],1),a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-container",{attrs:{fluid:""}},[a("v-row",{attrs:{dense:""}},t._l(t.Escritos,(function(e){return a("v-col",{key:e.title,attrs:{cols:"12",sm:"4"}},[a("v-card",{attrs:{color:"rgba(0, 0, 0, 0.5)"}},[a("v-img",{staticClass:"white--text align-end",attrs:{src:e.imagen,"aspect-ratio":"1.7",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"300px"}}),a("v-card-title",[t._v(" "+t._s(e.title)+" ")]),a("v-card-subtitle",[t._v(" "+t._s(t._f("truncate")(e.sinops,200))+" ")]),a("v-card-actions",[a("v-btn",t._g(t._b({attrs:{outlined:"",rounded:"",text:"",color:"green lighten-4"},on:{click:function(a){return t.toPDF(e.historia,e.title,e.imagen)}}},"v-btn",r,!1),n),[t._v(" Leer ")]),a("v-btn",{staticClass:"ma-1",attrs:{color:"error",plain:""},on:{click:function(a){return t.Eliminar(e.historia,e.id,e.imagen)}}},[t._v(" Eliminar ")]),a("v-spacer"),a("v-rating",{attrs:{readonly:"","background-color":"white",color:"yellow accent-4",dense:"","half-increments":"",hover:"",size:"18"},model:{value:e.valoracion,callback:function(a){t.$set(e,"valoracion",a)},expression:"story.valoracion"}})],1)],1)],1)})),1)],1)]}}])},[a("v-card",{staticClass:"overflow-hidden"},[a("v-app-bar",{attrs:{absolute:"",color:"dark",src:t.Image,"elevate-on-scroll":"","scroll-target":"#scrolling-techniques-7"}},[a("v-btn",{attrs:{color:"rgba(0,0,0,.5)"},on:{click:function(e){return t.prevPage()}}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-arrow-left-thick ")]),t._v("Atrás")],1),a("v-toolbar-title",{staticClass:"flex text-center"},[a("h4",[t._v(t._s(t.Titulo))])]),a("v-btn",{attrs:{color:"rgba(0,0,0,.5)",right:"",absolute:""},on:{click:function(e){return t.nextPage()}}},[t._v(" Siguiente "),a("v-icon",{attrs:{right:""}},[t._v(" mdi-arrow-right-thick ")])],1)],1),a("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-7","max-height":"600"}},[a("v-container",{staticStyle:{height:"1500px"}},[a("div",[a("pdf",{attrs:{src:t.src,page:t.currentPage},on:{"page-loaded":function(e){t.currentPage=e}}})],1)])],1)],1)],1)],1)],1)},Pt=[],It={components:{pdf:V["a"]},data:function(){return{show:!1,src:null,Titulo:"",Image:"",numPages:void 0,currentPage:1,story:!1,Escritos:[]}},methods:{HistoriasList:function(){var t=this,e=w["a"].auth().currentUser;Ie.collection("Historias").onSnapshot((function(a){t.Escritos.length=0,a.forEach((function(a){e.uid===a.data().autorID&&t.Escritos.push({title:a.data().titulo,id:a.data().libroID,sinops:a.data().sinopsis,imagen:a.data().imagen,historia:a.data().historia,valoracion:a.data().valoracion})}))}))},Eliminar:function(t,e,a){var n=this;return Object(C["a"])(regeneratorRuntime.mark((function r(){var i,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=w["a"].storage(),o=i.refFromURL(t),s=i.refFromURL(a),r.next=5,i.ref().child(o.fullPath).delete();case 5:return r.next=7,i.ref().child(s.fullPath).delete();case 7:return r.next=9,Ie.collection("Historias").doc(e).delete();case 9:n.HistoriasList();case 10:case"end":return r.stop()}}),r)})))()},toPDF:function(t,e,a){var n=this;this.Titulo=e,this.Image=a,this.currentPage=1,this.src=null,this.src=V["a"].createLoadingTask(t),this.src.promise.then((function(t){n.numPages=t.numPages}))},prevPage:function(){this.currentPage--},nextPage:function(){this.currentPage++}},mounted:function(){this.HistoriasList()}},St=It,Et=a("e4e5"),Tt=Object(c["a"])(St,yt,Pt,!1,null,null,null),Rt=Tt.exports;u()(Tt,{VAppBar:I["a"],VBanner:Et["a"],VBtn:S["a"],VCard:E["a"],VCardActions:T["a"],VCardSubtitle:T["b"],VCardTitle:T["d"],VCol:R["a"],VContainer:L["a"],VDialog:D["a"],VIcon:j["a"],VImg:A["a"],VRating:O["a"],VRow:H["a"],VSheet:U["a"],VSpacer:F["a"],VToolbarTitle:B["a"]});var Lt={components:{HistoriasSubidas:Rt},data:function(){return{nameUser:"",image:"",dialog:!1,people:[],model:1,admin:!1,sheet:!1,profilesheet:!1,showMenu:!1,ChangeImageWallpaper:"Cambiar Imagen",fileImage:null,urlImage:"",urlPerfil:"",pathImage:null,ImagePortada:"",ImagePerfil:""}},methods:{obtainAc:function(){var t=this;this.people.length=0,Ie.collection("users").get().then((function(e){e.forEach((function(e){var a=e.data();t.people.push({id:e.id,perfil:a.usuario,nombre:a.name,correo:a.email})}))})).catch((function(t){console.log("Error getting documents: ",t)}))},uploadWallpaper:function(){var t=this;return Object(C["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=w["a"].storage().ref(),n=w["a"].auth().currentUser,r="Usuarios/"+n.uid,e.next=5,a.child(r).put(t.fileImage);case 5:return t.pathImage=r,e.next=8,a.child(t.pathImage).getDownloadURL().then((function(t){i=t}));case 8:t.urlImage=i,t.ImagePortada=i;case 10:case"end":return e.stop()}}),e)})))()},changeWallpaper:function(){var t=this;return Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t.fileImage){e.next=5;break}return e.next=3,t.uploadWallpaper();case 3:a=w["a"].auth().currentUser,Ie.collection("Portadas").doc(a.uid).set({urlP:t.urlImage});case 5:t.fileImage=null,t.sheet=!1;case 7:case"end":return e.stop()}}),e)})))()},uploadProfile:function(){var t=this;return Object(C["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=w["a"].storage().ref(),n=w["a"].auth().currentUser,r="Perfiles/"+n.uid,e.next=5,a.child(r).put(t.fileImage);case 5:return t.pathImage=r,e.next=8,a.child(t.pathImage).getDownloadURL().then((function(t){i=t}));case 8:t.urlPerfil=i,t.ImagePerfil=i;case 10:case"end":return e.stop()}}),e)})))()},changeProfile:function(){var t=this;return Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t.fileImage){e.next=5;break}return e.next=3,t.uploadProfile();case 3:a=w["a"].auth().currentUser,Ie.collection("Perfiles").doc(a.uid).set({urlP:t.urlPerfil});case 5:t.fileImage=null,t.profilesheet=!1;case 7:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;w["a"].auth().onAuthStateChanged((function(e){if(e){t.nameUser=e.displayName,t.image=e.photoURL,t.admin=!1;var a=Ie.collection("admin").doc(e.uid);a.get().then((function(e){e.exists?t.admin=!0:t.admin=!1})).catch((function(t){console.log("Error getting document:",t)}));var n=Ie.collection("Portadas").doc(e.uid);n.get().then((function(e){t.ImagePortada=e.data().urlP}));var r=Ie.collection("Perfiles").doc(e.uid);r.get().then((function(e){e.exists&&(t.ImagePerfil=e.data().urlP)}))}else t.nameUser="John Doe",t.admin=!1,t.image="https://i.pinimg.com/736x/df/0c/09/df0c09967d74c081e14adcd8667fa2f9.jpg"}))}},Dt=Lt,jt=(a("1be2"),a("23a7")),At=a("d903"),Ot=a("604c"),Ht=a("1800"),Ut=a("8270"),Ft=a("e449"),Bt=a("0789"),$t=Object(c["a"])(Dt,Ct,Vt,!1,null,null,null),qt=$t.exports;u()($t,{VBottomSheet:dt["a"],VBtn:S["a"],VCard:E["a"],VCardActions:T["a"],VCardTitle:T["d"],VCol:R["a"],VContainer:L["a"],VDialog:D["a"],VFileInput:jt["a"],VIcon:j["a"],VImg:A["a"],VItem:At["a"],VItemGroup:Ot["b"],VList:z["a"],VListItem:W["a"],VListItemAction:Ht["a"],VListItemAvatar:Ut["a"],VListItemContent:G["a"],VListItemSubtitle:G["b"],VListItemTitle:G["c"],VMenu:Ft["a"],VResponsive:Y["a"],VRow:H["a"],VScrollYTransition:Bt["d"],VSheet:U["a"],VSpacer:F["a"]});var Mt={name:"ProfileUser",components:{Profile:qt}},Nt=Mt,zt=Object(c["a"])(Nt,_t,kt,!1,null,null,null),Wt=zt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("upload")},Jt=[],Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",large:"",plain:"",fixed:"",to:"/home"}},[a("v-icon",{attrs:{dark:""}},[t._v(" mdi-arrow-left-bold-outline ")])],1)],1),a("v-row",{attrs:{align:"center",justify:"center",absolute:"",fixed:""}},[a("v-col",{attrs:{sm:"5"}},[a("v-card",{attrs:{color:"rgb(0, 0, 0, 0.7)"}},[a("v-col",{attrs:{cols:"12"}},[a("h1",{staticClass:"text-h4 font-weight-thin mb-4",staticStyle:{background:"rgba(0, 0, 0, 0.8)"}},[t._v(" Subir una historia ")]),a("v-text-field",{attrs:{label:"Titulo",color:"white"},on:{input:function(e){return t.Condiciones()}},model:{value:t.Titulo,callback:function(e){t.Titulo=e},expression:"Titulo"}}),a("v-textarea",{attrs:{color:"white"},on:{input:function(e){return t.Condiciones()}},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",[t._v("Sinopsis")])]},proxy:!0}]),model:{value:t.Sinopsis,callback:function(e){t.Sinopsis=e},expression:"Sinopsis"}}),a("v-file-input",{attrs:{label:"Portada",accept:"image/*",filled:"","prepend-icon":"mdi-camera"},on:{input:function(e){return t.Condiciones()}},model:{value:t.fileImage,callback:function(e){t.fileImage=e},expression:"fileImage"}}),a("v-file-input",{attrs:{accept:".pdf","show-size":"",label:"Historia"},on:{input:function(e){return t.Condiciones()}},model:{value:t.filePDF,callback:function(e){t.filePDF=e},expression:"filePDF"}}),a("v-row",{attrs:{align:"center",justify:"center",absolute:"",fixed:""}},[a("v-btn",{staticClass:"ma-2 white--text",attrs:{disabled:!t.BotonDeSubida,outlined:""},on:{click:function(e){return t.uploadStory()}}},[t._v(" Subir historia "),a("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-cloud-upload ")])],1)],1)],1)],1)],1)],1),a("v-snackbar",{scopedSlots:t._u([{key:"action",fn:function(e){var n=e.attrs;return[a("v-btn",t._b({attrs:{color:"pink",text:""},on:{click:function(e){t.Subida=!1}}},"v-btn",n,!1),[t._v(" Close ")])]}}]),model:{value:t.Subida,callback:function(e){t.Subida=e},expression:"Subida"}},[t._v(" "+t._s(t.textsubida)+" ")])],1)},Qt=[],Yt={data:function(){return{Subida:!1,textsubida:"",fileImage:null,urlImage:"",BotonDeSubida:!1,pathImage:null,pathPDF:null,filePDF:null,urlPDF:"",Titulo:"",Sinopsis:""}},methods:{Condiciones:function(){""===this.Titulo||""===this.Sinopsis?this.BotonDeSubida=!1:this.BotonDeSubida=!0},uploadStory:function(){var t=this;return Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t.fileImage||null==t.filePDF){e.next=11;break}return a=w["a"].auth().currentUser,e.next=4,t.fileInputIMG();case 4:return e.next=6,t.fileInputPDF();case 6:Ie.collection("Historias").doc(a.uid+t.Titulo).set({titulo:t.Titulo,autorID:a.uid,libroID:a.uid+t.Titulo,autor:a.displayName,sinopsis:t.Sinopsis,imagen:t.urlImage,historia:t.urlPDF,valoracion:0}),t.Subida=!0,t.textsubida="La historia ha sido cargada con éxito",e.next=13;break;case 11:t.Subida=!0,t.textsubida="Error al subir la historia";case 13:t.fileImage=null,t.filePDF=null,t.Sinopsis="",t.Titulo="";case 14:case"end":return e.stop()}}),e)})))()},fileInputIMG:function(){var t=this;return Object(C["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=w["a"].storage().ref(),n="Imagenes/portada_"+t.fileImage.name,e.next=4,a.child(n).put(t.fileImage);case 4:return t.pathImage=n,e.next=7,a.child(t.pathImage).getDownloadURL().then((function(t){r=t}));case 7:t.urlImage=r;case 8:case"end":return e.stop()}}),e)})))()},fileInputPDF:function(){var t=this;return Object(C["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=w["a"].storage().ref(),n="Libros/story_"+t.filePDF.name,e.next=4,a.child(n).put(t.filePDF);case 4:return t.pathPDF=n,e.next=7,a.child(t.pathPDF).getDownloadURL().then((function(t){r=t}));case 7:t.urlPDF=r;case 8:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.Condiciones()}},Xt=Yt,Zt=(a("41f3"),a("2db4")),te=a("a844"),ee=Object(c["a"])(Xt,Kt,Qt,!1,null,null,null),ae=ee.exports;u()(ee,{VBtn:S["a"],VCard:E["a"],VCol:R["a"],VFileInput:jt["a"],VIcon:j["a"],VRow:H["a"],VSnackbar:Zt["a"],VTextField:ht["a"],VTextarea:te["a"]});var ne={name:"UploadH",components:{Upload:ae}},re=ne,ie=Object(c["a"])(re,Gt,Jt,!1,null,null,null),oe=ie.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("buscar-historias")},ce=[],le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-card",{staticClass:"mx-auto",attrs:{color:"rgba(72, 52, 62, 0.12)"}},[a("v-toolbar",{attrs:{color:"#fcb69f",src:"https://cdn.pixabay.com/photo/2019/05/14/21/50/storytelling-4203628_1280.jpg"},scopedSlots:t._u([{key:"img",fn:function(e){var n=e.props;return[a("v-img",t._b({attrs:{gradient:"to top right, rgba(146, 135, 22, 0.5), rgba(229, 209, 166, 0.8)"}},"v-img",n,!1))]}}],null,!0)},[a("v-btn",{staticClass:"mx-2",attrs:{fab:"",icon:"",fixed:"",to:"/home"}},[a("v-icon",[t._v(" mdi-arrow-left-bold ")])],1),a("v-spacer"),a("v-toolbar-title",[a("h1",{staticClass:"text-h4 font-weight-thin"},[t._v(" Buscar Historias ")])]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$refs.search.focus()}}},[a("v-icon",[t._v("mdi-magnify")])],1)],1),a("v-container",{staticClass:"py-0"},[a("v-row",{attrs:{align:"center",justify:"start"}},[t.allSelected?t._e():a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{ref:"search",attrs:{"full-width":"","background-color":"rgba(72, 52, 62, 0.2)",outline:"",color:"black","hide-details":"",label:"Inserte el nombre de la historia","single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t.allSelected?t._e():a("v-divider"),t._l(t.categories,(function(e){return[t.selected.includes(e)?t._e():a("v-card",t._g(t._b({key:e.text,attrs:{color:"rgba(0, 0, 0, 0.5)",disabled:t.loading},on:{click:function(a){return t.toPDF(e.historia,e.text,e.imagen)}}},"v-card",r,!1),n),[a("v-img",{staticClass:"white--text align-end",attrs:{src:e.imagen,"aspect-ratio":"1.7",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"300px"}}),a("v-card-title",[t._v(t._s(e.text))])],1)]})),a("v-divider")],2)]}}])},[a("v-card",{staticClass:"overflow-hidden"},[a("v-app-bar",{attrs:{absolute:"",color:"dark",src:t.Image,"elevate-on-scroll":"","scroll-target":"#scrolling-techniques-7"}},[a("v-btn",{attrs:{color:"rgba(0,0,0,.5)"},on:{click:function(e){return t.prevPage()}}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-arrow-left-thick ")]),t._v("Atrás")],1),a("v-toolbar-title",{staticClass:"flex text-center"},[a("h4",[t._v(t._s(t.Titulo))])]),a("v-btn",{attrs:{color:"rgba(0,0,0,.5)",right:"",absolute:""},on:{click:function(e){return t.nextPage()}}},[t._v(" Siguiente "),a("v-icon",{attrs:{right:""}},[t._v(" mdi-arrow-right-thick ")])],1)],1),a("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-7","max-height":"600"}},[a("v-container",{staticStyle:{height:"1500px"}},[a("div",[a("pdf",{attrs:{src:t.src,page:t.currentPage},on:{"page-loaded":function(e){t.currentPage=e}}})],1)])],1)],1)],1)],1)},ue=[],de=a("b85c"),fe=(a("ac1f"),a("841c"),{components:{pdf:V["a"]},data:function(){return{items:[],src:null,Titulo:"",Image:"",numPages:void 0,currentPage:1,loading:!1,search:"",selected:[]}},computed:{allSelected:function(){return this.selected.length===this.items.length},categories:function(){var t=this.search.toLowerCase();return t?this.items.filter((function(e){var a=e.text.toLowerCase();return a.indexOf(t)>-1})):this.items},selections:function(){var t,e=[],a=Object(de["a"])(this.selected);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.push(n)}}catch(r){a.e(r)}finally{a.f()}return e}},watch:{selected:function(){this.search=""}},methods:{next:function(){var t=this;this.loading=!0,setTimeout((function(){t.search="",t.selected=[],t.loading=!1}),2e3)},HistoriasList:function(){var t=this;Ie.collection("Historias").onSnapshot((function(e){t.items.length=0,e.forEach((function(e){t.items.push({text:e.data().titulo,imagen:e.data().imagen,historia:e.data().historia,valoracion:e.data().valoracion})}))}))},toPDF:function(t,e,a){var n=this;this.Titulo=e,this.Image=a,this.currentPage=1,this.src=null,this.src=V["a"].createLoadingTask(t),this.src.promise.then((function(t){n.numPages=t.numPages}))},prevPage:function(){this.currentPage--},nextPage:function(){this.currentPage++}},mounted:function(){this.HistoriasList()}}),me=fe,he=a("ce7e"),ve=Object(c["a"])(me,le,ue,!1,null,null,null),pe=ve.exports;u()(ve,{VAppBar:I["a"],VBtn:S["a"],VCard:E["a"],VCardTitle:T["d"],VCol:R["a"],VContainer:L["a"],VDialog:D["a"],VDivider:he["a"],VIcon:j["a"],VImg:A["a"],VRow:H["a"],VSheet:U["a"],VSpacer:F["a"],VTextField:ht["a"],VToolbar:X["a"],VToolbarTitle:B["a"]});var ge={name:"Home",components:{BuscarHistorias:pe}},be=ge,xe=Object(c["a"])(be,se,ce,!1,null,null,null),we=xe.exports;n["a"].use(v["a"]);var _e=[{path:"/",redirect:"/home"},{path:"/home",name:"Home",component:rt},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/login",name:"Login",component:wt},{path:"/profileuser",name:"ProfileUser",component:Wt,meta:{requiresAuth:!0}},{path:"/upload",name:"UploadH",component:oe,meta:{requiresAuth:!0}},{path:"/search",name:"Search",component:we}],ke=new v["a"]({mode:"history",base:"/historias-del-magdalena/",routes:_e});ke.beforeEach((function(t,e,a){var n=t.matched.some((function(t){return t.meta.requiresAuth}));n?w["a"].auth().onAuthStateChanged((function(t){t?a():a("/login")})):a()}));var Ce=ke,Ve=a("f309");n["a"].use(Ve["a"]);var ye=new Ve["a"]({theme:{dark:!0}});a("24ee");n["a"].config.productionTip=!1;var Pe={apiKey:"AIzaSyBJiS8FHWVnc0n57RbfQcz_lAElr5dKgEY",authDomain:"pruebaweb0592821.firebaseapp.com",projectId:"pruebaweb0592821",storageBucket:"pruebaweb0592821.appspot.com",messagingSenderId:"352941162450",appId:"1:352941162450:web:9942260d9dfecf84eb920b",measurementId:"G-8QSXBE5HQP"};w["a"].initializeApp(Pe);var Ie=w["a"].firestore(),Se=w["a"].storage();n["a"].filter("truncate",(function(t,e){return t.length>e&&(t=t.substring(0,e-3)+"..."),t})),new n["a"]({router:Ce,vuetify:ye,render:function(t){return t(h)}}).$mount("#app")},6:function(t,e){},"85ec":function(t,e,a){},ebce:function(t,e,a){},f884:function(t,e,a){},faf5:function(t,e,a){}});
//# sourceMappingURL=app.349d9051.js.map